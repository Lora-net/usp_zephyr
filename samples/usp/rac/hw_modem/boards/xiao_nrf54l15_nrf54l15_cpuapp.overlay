/*
 * Copyright (c) 2024 Semtech Corporation
 *
 * SPDX-License-Identifier: Apache-2.0
 */

/ {
	zephyr,user {
		/* PINS used for the HW modem sample. */
		hw-modem-command-gpios = <&gpio0 4 (GPIO_ACTIVE_HIGH | GPIO_PULL_UP)>; //D12
		hw-modem-busy-gpios = <&gpio2 10 GPIO_ACTIVE_HIGH>; //D13
		hw-modem-event-gpios = <&gpio2 6 GPIO_ACTIVE_HIGH>; //D15
	};

	aliases {
		/* Specify which UART is used for communication as input for the hw modem tester */
		smtc-hal-uart = &xiao_serial;
		smtc-watchdog = &wdt31;
	};
};

// Re-route the xiao_serial (uart21) to use i2c pins while RX is still bugged on P2.07
&xiao_serial {
	status = "okay";
	pinctrl-0 = <&smtc_uart21_reroute_default>;
	pinctrl-1 = <&smtc_uart21_reroute_sleep>;
};

&pinctrl {
	smtc_uart21_reroute_default: smtc_uart21_reroute_default {
		group1 {
			psels = <NRF_PSEL(UART_TX, 1, 10)>;
		};
		group2 {
			psels = <NRF_PSEL(UART_RX, 1, 11)>;
			bias-pull-up;
		};
	};

	smtc_uart21_reroute_sleep: smtc_uart21_reroute_sleep {
		group1 {
			psels = <NRF_PSEL(UART_TX, 1, 10)>,
					<NRF_PSEL(UART_RX, 1, 11)>;
			low-power-enable;
		};
	};
};

&adc {
	status = "disabled";
};

&i2c22 {
	status = "disabled";
};

&i2c30 {
	status = "disabled";
};

&wdt31 {
	status = "okay";
};
