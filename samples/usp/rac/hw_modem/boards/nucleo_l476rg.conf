# Copyright (c) 2024 Semtech Corporation
# SPDX-License-Identifier: Apache-2.0

# ------------------------------ NUCLEO L476RG CLOCK DRIFT -----------------------------

# PM is required for STM32_LPTIM_TIMER but we DON'T want device PM
# Only enable system PM, not device PM to avoid UART suspension
CONFIG_PM_DEVICE=n
CONFIG_PM=y

# Prevent deep sleep to keep UART operational
# Use custom PM policy to control sleep depth
CONFIG_PM_POLICY_CUSTOM=y

# Disable SYSTICK and use LPTIM on LSE for precise clock without drift
CONFIG_CORTEX_M_SYSTICK=n
CONFIG_STM32_LPTIM_TIMER=y
CONFIG_CLOCK_CONTROL=y

# Note: LPTIM clock source (LSE 32768Hz) is configured in the device tree overlay


